{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"registration-info\", {\n      'disabled-appointment': !$options.canCancel\n    }])\n  }, [_createElementVNode(\"p\", null, \"就诊科室: \" + _toDisplayString($props.registration.department), 1 /* TEXT */), _createElementVNode(\"p\", null, \"门诊类型: \" + _toDisplayString($props.registration.outpatientType), 1 /* TEXT */), _createElementVNode(\"p\", null, \"看诊医生: \" + _toDisplayString($props.registration.doctor_Name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"就诊时间: \" + _toDisplayString($options.formatTime($props.registration.visitTime)), 1 /* TEXT */), _createElementVNode(\"p\", null, \"挂号时间: \" + _toDisplayString($options.formatTime($props.registration.registrationTime)), 1 /* TEXT */), _createElementVNode(\"p\", null, \"就诊人: \" + _toDisplayString($props.registration.name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"就诊号: \" + _toDisplayString($props.registration.medicalNumber), 1 /* TEXT */), _createElementVNode(\"p\", null, \"订单编号: \" + _toDisplayString($props.registration.id), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"cancel - button\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.cancelAppointment && $options.cancelAppointment(...args))\n  }, \"取消预约\")], 2 /* CLASS */);\n}","map":{"version":3,"names":["_createElementBlock","class","_normalizeClass","$options","canCancel","_createElementVNode","_toDisplayString","$props","registration","department","outpatientType","doctor_Name","formatTime","visitTime","registrationTime","name","medicalNumber","id","onClick","_cache","args","cancelAppointment"],"sources":["D:\\huawei\\qian\\src\\components\\RegistrationInfo.vue"],"sourcesContent":["<!-- RegistrationInfo.vue -->\r\n<template>\r\n  <div class=\"registration-info\" :class=\"{ 'disabled-appointment':!canCancel }\">\r\n    <p>就诊科室: {{ registration.department }}</p>\r\n    <p>门诊类型: {{ registration.outpatientType }}</p>\r\n    <p>看诊医生: {{ registration.doctor_Name }}</p>\r\n    <p>就诊时间: {{ formatTime(registration.visitTime) }}</p>\r\n    <p>挂号时间: {{ formatTime(registration.registrationTime) }}</p>\r\n    <p>就诊人: {{ registration.name }}</p>\r\n    <p>就诊号: {{ registration.medicalNumber }}</p>\r\n    <p>订单编号: {{ registration.id }}</p>\r\n    <button class=\"cancel - button\" @click=\"cancelAppointment\">取消预约</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  props: {\r\n    registration: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {\r\n    canCancel() {\r\n      const now = new Date();\r\n      const visitTime = new Date(this.registration.visitTime);\r\n      const registrationTime = new Date(this.registration.registrationTime);\r\n      return now.getTime() < visitTime.getTime() && now.getTime() < registrationTime.getTime();\r\n    }\r\n  },\r\n  methods: {\r\n    formatTime(time) {\r\n      if (time) {\r\n        return new Date(time).toLocaleString();\r\n      }\r\n      return '';\r\n    },\r\n    cancelAppointment() {\r\n      // 发送请求到后端API来取消预约\r\n      axios.post(`/api/registrationLists/cancel/${this.registration.id}`)\r\n        .then(response => {\r\n          if (response.status === 200) {\r\n            alert('预约已取消');\r\n            // 从列表中删除这条记录\r\n            this.$emit('delete-appointment', this.registration);\r\n          } else {\r\n            alert('预约取消失败: ' + response.data.message);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('取消预约出错:', error);\r\n          alert('预约取消失败，请重试。');\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.registration-info {\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.cancel-button {\r\n  padding: 10px 20px;\r\n  background-color: #f44336;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n \r\n}\r\n.registration-info {\r\n                  padding: 20px;\r\n                  margin-bottom: 20px;\r\n                  border-bottom: 1px solid #ddd;\r\n                  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n                  background-color: #fff;\r\n                  border-radius: 8px;\r\n                }\r\n.disabled-appointment {\r\n              opacity: 0.5;\r\n            }\r\n.cancel-button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n</style>"],"mappings":";;uBAEEA,mBAAA,CAUM;IAVDC,KAAK,EAFZC,eAAA,EAEa,mBAAmB;MAAA,yBAAmCC,QAAA,CAAAC;IAAS;MACxEC,mBAAA,CAA0C,WAAvC,QAAM,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,YAAY,CAACC,UAAU,kBACnCJ,mBAAA,CAA8C,WAA3C,QAAM,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,YAAY,CAACE,cAAc,kBACvCL,mBAAA,CAA2C,WAAxC,QAAM,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,YAAY,CAACG,WAAW,kBACpCN,mBAAA,CAAqD,WAAlD,QAAM,GAAAC,gBAAA,CAAGH,QAAA,CAAAS,UAAU,CAACL,MAAA,CAAAC,YAAY,CAACK,SAAS,mBAC7CR,mBAAA,CAA4D,WAAzD,QAAM,GAAAC,gBAAA,CAAGH,QAAA,CAAAS,UAAU,CAACL,MAAA,CAAAC,YAAY,CAACM,gBAAgB,mBACpDT,mBAAA,CAAmC,WAAhC,OAAK,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,YAAY,CAACO,IAAI,kBAC5BV,mBAAA,CAA4C,WAAzC,OAAK,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,YAAY,CAACQ,aAAa,kBACrCX,mBAAA,CAAkC,WAA/B,QAAM,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,YAAY,CAACS,EAAE,kBAC3BZ,mBAAA,CAAwE;IAAhEJ,KAAK,EAAC,iBAAiB;IAAEiB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEjB,QAAA,CAAAkB,iBAAA,IAAAlB,QAAA,CAAAkB,iBAAA,IAAAD,IAAA,CAAiB;KAAE,MAAI,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}