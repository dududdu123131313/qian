{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'ProfileComponent',\n  data() {\n    return {\n      username: 'user123',\n      name: '张三',\n      phone: '13800138000',\n      familyMembers: [],\n      showModal: false,\n      newMember: {\n        name: '',\n        id: '',\n        age: null,\n        // 将年龄初始化为null，方便后续类型判断和验证\n        sex: ''\n      },\n      isRealNameVerified: false,\n      realNameInfo: null,\n      showRealNameModal: false,\n      authInfo: {\n        name: '',\n        id: '',\n        age: null,\n        // 将年龄初始化为null，方便后续类型判断和验证\n        sex: ''\n      }\n    };\n  },\n  computed: {\n    // 计算属性，根据实名认证状态禁用按钮\n    canVerify() {\n      return !this.isRealNameVerified;\n    }\n  },\n  methods: {\n    changePassword() {\n      alert('修改密码功能尚未实现');\n    },\n    bindPhone() {\n      alert('绑定手机号功能尚未实现');\n    },\n    logout() {\n      alert('退出登录功能尚未实现');\n    },\n    showAddFamilyMemberModal() {\n      this.showModal = true;\n    },\n    closeModal() {\n      this.showModal = false;\n    },\n    submitFamilyMember() {\n      // 进行前端数据验证，确保必填项都有合理的值\n      if (!this.newMember.name || !this.newMember.id || this.newMember.age === null || !this.newMember.sex) {\n        alert('请填写完整的家庭成员信息');\n        return;\n      }\n      axios.post('/family-members', {\n        name: this.newMember.name,\n        id: this.newMember.id,\n        age: this.newMember.age,\n        sex: this.newMember.sex\n      }).then(response => {\n        this.familyMembers.push(response.data);\n        // 清空输入框的值\n        this.newMember.name = '';\n        this.newMember.id = '';\n        this.newMember.age = null;\n        this.newMember.sex = '';\n        this.closeModal();\n      }).catch(error => {\n        console.error('Error adding family member:', error);\n        alert('添加家庭成员失败，请重试。');\n      });\n    },\n    showingRealNameModal() {\n      this.showRealNameModal = true;\n    },\n    closeRealNameModal() {\n      this.showRealNameModal = false;\n    },\n    submitRealNameVerification() {\n      if (this.canVerify) {\n        const realNameData = {\n          name: this.authInfo.name,\n          id: this.authInfo.id,\n          sex: this.authInfo.sex,\n          age: this.authInfo.age\n        };\n\n        // 前端数据验证逻辑，完善年龄范围验证以及其他可能的验证逻辑\n        if (realNameData.age === null || isNaN(realNameData.age) || realNameData.age < 0 || realNameData.age > 150) {\n          alert('年龄需在0到150岁之间且为有效数字，请重新输入。');\n          return;\n        }\n        if (!realNameData.name || !realNameData.id || !realNameData.sex) {\n          alert('请填写完整的实名认证信息');\n          return;\n        }\n        axios.post('/identifications', realNameData).then(response => {\n          this.realNameInfo = response.data;\n          if (response.data && response.data.success) {\n            this.isRealNameVerified = true;\n            // 清空输入框的值\n            this.authInfo.name = '';\n            this.authInfo.id = '';\n            this.authInfo.age = null;\n            this.authInfo.sex = '';\n            this.closeRealNameModal();\n          } else {\n            console.error('实名认证成功，但返回数据格式不符合预期:', response.data);\n            alert('实名认证成功。');\n          }\n        }).catch(error => {\n          console.error('Error during real-name verification:', error);\n          alert('实名认证失败，请重试。');\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","username","phone","familyMembers","showModal","newMember","id","age","sex","isRealNameVerified","realNameInfo","showRealNameModal","authInfo","computed","canVerify","methods","changePassword","alert","bindPhone","logout","showAddFamilyMemberModal","closeModal","submitFamilyMember","post","then","response","push","catch","error","console","showingRealNameModal","closeRealNameModal","submitRealNameVerification","realNameData","isNaN","success"],"sources":["C:\\Users\\zsx\\Desktop\\12.15\\qian\\src\\components\\ProfileComponent.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"profile-container\">\r\n    <h1 class=\"title\">个人中心</h1>\r\n    <div class=\"section-box account-info\">\r\n      <h2 class=\"section-title\">账号信息</h2>\r\n      <p>用户名: <strong>{{ username }}</strong></p>\r\n      <p>姓名: <strong>{{ name }}</strong></p>\r\n      <p>手机号: <strong>{{ phone }}</strong></p>\r\n      <button @click=\"changePassword\">修改密码</button>\r\n      <button @click=\"bindPhone\">绑定手机号</button>\r\n      <button @click=\"logout\">退出登录</button>\r\n    </div>\r\n    <div class=\"section-box\">\r\n      <h2 class=\"section-title\">实名认证信息</h2>\r\n      <p v-if=\"isRealNameVerified\">姓名: {{ realNameInfo.name }}</p>\r\n      <p v-if=\"isRealNameVerified\">身份证号: {{ realNameInfo.id }}</p>\r\n      <button :disabled=\"isRealNameVerified\" @click=\"showingRealNameModal\">实名认证</button>\r\n    </div>\r\n    <div class=\"section-box\">\r\n      <h2 class=\"section-title\">家庭成员信息</h2>\r\n      <button @click=\"showAddFamilyMemberModal\">添加家庭成员</button>\r\n      <div v-for=\"member in familyMembers\" :key=\"member.id\" class=\"family-member\">\r\n        <p>姓名: {{ member.name }}</p>\r\n        <p>年龄: {{ member.age }}</p>\r\n        <p>性别: {{ member.sex }}</p>\r\n        <p>身份证号: {{ member.id }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 添加家庭成员的弹窗 -->\r\n    <div v-if=\"showModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <span class=\"close\" @click=\"closeModal\">&times;</span>\r\n        <h2>添加家庭成员</h2>\r\n        <input type=\"text\" v-model=\"newMember.name\" placeholder=\"姓名\" required />\r\n        <input type=\"text\" v-model=\"newMember.id\" placeholder=\"身份证号\" required />\r\n        <input type=\"number\" v-model=\"newMember.age\" placeholder=\"年龄\" required />\r\n        <select v-model=\"newMember.sex\" placeholder=\"性别\" required>\r\n          <option value=\"男\">男</option>\r\n          <option value=\"女\">女</option>\r\n        </select>\r\n        <button @click=\"submitFamilyMember\">添加</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 实名认证的弹窗 -->\r\n    <div v-if=\"showRealNameModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <span class=\"close\" @click=\"closeRealNameModal\">&times;</span>\r\n        <h2>实名认证</h2>\r\n        <input type=\"text\" v-model=\"authInfo.name\" placeholder=\"姓名\" required />\r\n        <input type=\"text\" v-model=\"authInfo.id\" placeholder=\"身份证号\" required />\r\n        <input type=\"number\" v-model=\"authInfo.age\" placeholder=\"年龄\" required />\r\n        <select v-model=\"authInfo.sex\" placeholder=\"性别\" required>\r\n          <option value=\"男\">男</option>\r\n          <option value=\"女\">女</option>\r\n        </select>\r\n        <button @click=\"submitRealNameVerification\">认证</button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'ProfileComponent',\r\n  data() {\r\n    return {\r\n      username: 'user123',\r\n      name: '张三',\r\n      phone: '13800138000',\r\n      familyMembers: [],\r\n      showModal: false,\r\n      newMember: {\r\n        name: '',\r\n        id: '',\r\n        age: null, // 将年龄初始化为null，方便后续类型判断和验证\r\n        sex: ''\r\n      },\r\n      isRealNameVerified: false,\r\n      realNameInfo: null,\r\n      showRealNameModal: false,\r\n      authInfo: {\r\n        name: '',\r\n        id: '',\r\n        age: null, // 将年龄初始化为null，方便后续类型判断和验证\r\n        sex: ''\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    // 计算属性，根据实名认证状态禁用按钮\r\n    canVerify() {\r\n      return!this.isRealNameVerified;\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    changePassword() {\r\n      alert('修改密码功能尚未实现');\r\n    },\r\n    bindPhone() {\r\n      alert('绑定手机号功能尚未实现');\r\n    },\r\n    logout() {\r\n      alert('退出登录功能尚未实现');\r\n    },\r\n    showAddFamilyMemberModal() {\r\n      this.showModal = true;\r\n    },\r\n    closeModal() {\r\n      this.showModal = false;\r\n    },\r\n    submitFamilyMember() {\r\n      // 进行前端数据验证，确保必填项都有合理的值\r\n      if (!this.newMember.name ||!this.newMember.id || this.newMember.age === null ||!this.newMember.sex) {\r\n        alert('请填写完整的家庭成员信息');\r\n        return;\r\n      }\r\n      axios.post('/family-members', {\r\n        name: this.newMember.name,\r\n        id: this.newMember.id,\r\n        age: this.newMember.age,\r\n        sex: this.newMember.sex\r\n      })\r\n          .then(response => {\r\n            this.familyMembers.push(response.data);\r\n            // 清空输入框的值\r\n            this.newMember.name = '';\r\n            this.newMember.id = '';\r\n            this.newMember.age = null;\r\n            this.newMember.sex = '';\r\n            this.closeModal();\r\n          })\r\n          .catch(error => {\r\n            console.error('Error adding family member:', error);\r\n            alert('添加家庭成员失败，请重试。');\r\n          });\r\n    },\r\n    showingRealNameModal() {\r\n      this.showRealNameModal = true;\r\n    },\r\n    closeRealNameModal() {\r\n      this.showRealNameModal = false;\r\n    },\r\n    submitRealNameVerification() {\r\n      if (this.canVerify) {\r\n        const realNameData = {\r\n          name: this.authInfo.name,\r\n          id: this.authInfo.id,\r\n          sex: this.authInfo.sex,\r\n          age: this.authInfo.age,\r\n        };\r\n\r\n        // 前端数据验证逻辑，完善年龄范围验证以及其他可能的验证逻辑\r\n        if (realNameData.age === null || isNaN(realNameData.age) || realNameData.age < 0 || realNameData.age > 150) {\r\n          alert('年龄需在0到150岁之间且为有效数字，请重新输入。');\r\n          return;\r\n        }\r\n        if (!realNameData.name ||!realNameData.id ||!realNameData.sex) {\r\n          alert('请填写完整的实名认证信息');\r\n          return;\r\n        }\r\n\r\n        axios.post('/identifications', realNameData)\r\n            .then(response => {\r\n              this.realNameInfo = response.data;\r\n              if (response.data && response.data.success) {\r\n                this.isRealNameVerified = true;\r\n                // 清空输入框的值\r\n                this.authInfo.name = '';\r\n                this.authInfo.id = '';\r\n                this.authInfo.age = null;\r\n                this.authInfo.sex = '';\r\n                this.closeRealNameModal();\r\n              } else {\r\n                console.error('实名认证成功，但返回数据格式不符合预期:', response.data);\r\n                alert('实名认证成功。');\r\n              }\r\n            })\r\n            .catch(error => {\r\n              console.error('Error during real-name verification:', error);\r\n              alert('实名认证失败，请重试。');\r\n            });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n  margin-left: 20px;\r\n}\r\n\r\n.title {\r\n  font-size: 24px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-box {\r\n  background-color: #f9f9f9;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  width: 95%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 18px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.account-info strong {\r\n  margin-left: 5px;\r\n}\r\n\r\nbutton {\r\n  margin-top: 10px;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  cursor: pointer;\r\n  margin-right: 10px;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.family-member {\r\n  background-color: #f9f9f9;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.modal {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fefefe;\r\n  margin: auto;\r\n  padding: 20px;\r\n  border: 1px solid #888;\r\n  width: 80%;\r\n  max-width: 300px;\r\n}\r\n\r\n.close {\r\n  color: #aaa;\r\n  float: right;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n}\r\n\r\n.close:hover,\r\n.close:focus {\r\n  color: black;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin: 10px 0;\r\n  display: inline-block;\r\n  border: 1px solid #ccc;\r\n  box-sizing: border-box;\r\n}\r\n.nav-bar {\r\n  width: 200px;\r\n  height: 100%;\r\n  position: fixed;\r\n  background-color: #3131FF;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}