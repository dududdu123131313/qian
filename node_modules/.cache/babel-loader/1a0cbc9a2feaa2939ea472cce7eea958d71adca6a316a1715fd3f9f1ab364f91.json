{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'ProfileComponent',\n  data() {\n    return {\n      username: 'user123',\n      name: '张三',\n      phone: '13800138000',\n      familyMembers: [],\n      showModal: false,\n      newMember: {\n        name: '',\n        idNumber: ''\n      },\n      isRealNameVerified: false,\n      realNameInfo: null,\n      showRealNameModal: false,\n      authInfo: {\n        name: '',\n        idNumber: ''\n      }\n    };\n  },\n  computed: {\n    // 计算属性，根据实名认证状态禁用按钮\n    canVerify() {\n      return !this.isRealNameVerified;\n    }\n  },\n  mounted() {\n    this.loadUserInfo();\n  },\n  methods: {\n    loadUserInfo() {\n      // 模拟加载用户信息\n      const username = 'exampleUser';\n      this.$store.dispatch('setCurrentUser', {\n        name: username\n      });\n    },\n    changePassword() {\n      alert('修改密码功能尚未实现');\n    },\n    bindPhone() {\n      alert('绑定手机号功能尚未实现');\n    },\n    logout() {\n      alert('退出登录功能尚未实现');\n    },\n    showAddFamilyMemberModal() {\n      this.showModal = true;\n    },\n    closeModal() {\n      this.showModal = false;\n    },\n    submitFamilyMember() {\n      // 检查姓名和身份证号是否已填写\n      if (!this.newMember.name || !this.newMember.idNumber) {\n        alert('请填写姓名和身份证号');\n        return;\n      }\n      if (this.newMember.idNumber.length !== 18) {\n        alert('身份证号必须为18位');\n        return;\n      }\n\n      // 创建新家庭成员对象\n      const newFamilyMember = {\n        id: this.familyMembers.length + 1,\n        // 假设家庭成员ID是连续的\n        name: this.newMember.name,\n        age: '',\n        // 年龄未提供，可以留空或后续补充\n        gender: '',\n        // 性别未提供，可以留空或后续补充\n        idNumber: this.newMember.idNumber\n      };\n\n      // 将新家庭成员添加到数组中\n      this.familyMembers.push(newFamilyMember);\n\n      // 清空输入框\n      this.newMember.name = '';\n      this.newMember.idNumber = '';\n\n      // 关闭弹窗\n      this.closeModal();\n    },\n    showingRealNameModal() {\n      this.showRealNameModal = true;\n    },\n    closeRealNameModal() {\n      this.showRealNameModal = false;\n    },\n    submitRealNameVerification() {\n      if (this.canVerify) {\n        axios.post('/api/real-name-verification', {\n          name: this.authInfo.name,\n          idNumber: this.authInfo.idNumber\n        }).then(response => {\n          this.realNameInfo = response.data; // 假设后端返回了实名信息\n          this.isRealNameVerified = true;\n          this.authInfo.name = '';\n          this.authInfo.idNumber = '';\n          this.closeRealNameModal();\n        }).catch(error => {\n          console.error('Error during real-name verification:', error);\n          alert('实名认证失败，请重试。');\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","username","phone","familyMembers","showModal","newMember","idNumber","isRealNameVerified","realNameInfo","showRealNameModal","authInfo","computed","canVerify","mounted","loadUserInfo","methods","$store","dispatch","changePassword","alert","bindPhone","logout","showAddFamilyMemberModal","closeModal","submitFamilyMember","length","newFamilyMember","id","age","gender","push","showingRealNameModal","closeRealNameModal","submitRealNameVerification","post","then","response","catch","error","console"],"sources":["C:\\Users\\zsx\\Desktop\\v\\hosptial-vue\\vue\\src\\components\\ProfileComponent.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-container\">\r\n    <h1 class=\"title\">个人中心</h1>\r\n    <div class=\"section-box account-info\">\r\n      <h2 class=\"section-title\">账号信息</h2>\r\n      <p>用户名: <strong>{{ username }}</strong></p>\r\n      <p>姓名: <strong>{{ name }}</strong></p>\r\n      <p>手机号: <strong>{{ phone }}</strong></p>\r\n      <button @click=\"changePassword\">修改密码</button>\r\n      <button @click=\"bindPhone\">绑定手机号</button>\r\n      <button @click=\"logout\">退出登录</button>\r\n    </div>\r\n    <div class=\"section-box\">\r\n      <h2 class=\"section-title\">实名认证信息</h2>\r\n      <p v-if=\"isRealNameVerified\">姓名: {{ realNameInfo.name }}</p>\r\n      <p v-if=\"isRealNameVerified\">身份证号: {{ realNameInfo.idNumber }}</p>\r\n      <button :disabled=\"isRealNameVerified\" @click=\"showingRealNameModal\">实名认证</button>\r\n    </div>\r\n    <div class=\"section-box\">\r\n      <h2 class=\"section-title\">家庭成员信息</h2>\r\n      <button @click=\"showAddFamilyMemberModal\">添加家庭成员</button>\r\n      <div v-for=\"member in familyMembers\" :key=\"member.id\" class=\"family-member\">\r\n        <p>姓名: {{ member.name }}</p>\r\n        <p>身份证号: {{ member.idNumber }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 添加家庭成员的弹窗 -->\r\n    <div v-if=\"showModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <span class=\"close\" @click=\"closeModal\">&times;</span>\r\n        <h2>添加家庭成员</h2>\r\n        <input type=\"text\" v-model=\"newMember.name\" placeholder=\"姓名\" required />\r\n        <input type=\"text\" v-model=\"newMember.idNumber\" placeholder=\"身份证号\" required />\r\n        <button @click=\"submitFamilyMember\">添加</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 实名认证的弹窗 -->\r\n    <div v-if=\"showRealNameModal\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <span class=\"close\" @click=\"closeRealNameModal\">&times;</span>\r\n        <h2>实名认证</h2>\r\n        <input type=\"text\" v-model=\"authInfo.name\" placeholder=\"姓名\" required />\r\n        <input type=\"text\" v-model=\"authInfo.idNumber\" placeholder=\"身份证号\" required />\r\n        <button @click=\"submitRealNameVerification\">认证</button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'ProfileComponent',\r\n  data() {\r\n    return {\r\n      username: 'user123',\r\n      name: '张三',\r\n      phone: '13800138000',\r\n\r\n      familyMembers: [],\r\n      showModal: false,\r\n      newMember: {\r\n        name: '',\r\n        idNumber: ''\r\n      },\r\n\r\n     isRealNameVerified: false,\r\n      realNameInfo: null,\r\n      showRealNameModal: false,\r\n      authInfo: { name: '', idNumber: '' },\r\n      \r\n      \r\n    };\r\n  },\r\n\r\n  computed: {\r\n    // 计算属性，根据实名认证状态禁用按钮\r\n    canVerify() {\r\n      return !this.isRealNameVerified;\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.loadUserInfo();\r\n  },\r\n  methods: {\r\n    loadUserInfo() {\r\n      // 模拟加载用户信息\r\n      const username = 'exampleUser';\r\n      this.$store.dispatch('setCurrentUser', { name: username });\r\n    },\r\n    changePassword() {\r\n      alert('修改密码功能尚未实现');\r\n    },\r\n    bindPhone() {\r\n      alert('绑定手机号功能尚未实现');\r\n    },\r\n    logout() {\r\n      alert('退出登录功能尚未实现');\r\n    },\r\n    showAddFamilyMemberModal() {\r\n      this.showModal = true;\r\n    },\r\n    closeModal() {\r\n      this.showModal = false;\r\n    },\r\n    submitFamilyMember() {\r\n  // 检查姓名和身份证号是否已填写\r\n  if (!this.newMember.name || !this.newMember.idNumber) {\r\n    alert('请填写姓名和身份证号');\r\n    return;\r\n  }\r\n  if (this.newMember.idNumber.length !== 18) {\r\n    alert('身份证号必须为18位');\r\n    return;\r\n  }\r\n\r\n  // 创建新家庭成员对象\r\n  const newFamilyMember = {\r\n    id: this.familyMembers.length + 1, // 假设家庭成员ID是连续的\r\n    name: this.newMember.name,\r\n    age: '', // 年龄未提供，可以留空或后续补充\r\n    gender: '', // 性别未提供，可以留空或后续补充\r\n    idNumber: this.newMember.idNumber\r\n  };\r\n\r\n  // 将新家庭成员添加到数组中\r\n  this.familyMembers.push(newFamilyMember);\r\n\r\n  // 清空输入框\r\n  this.newMember.name = '';\r\n  this.newMember.idNumber = '';\r\n\r\n  // 关闭弹窗\r\n  this.closeModal();\r\n},\r\n    showingRealNameModal() {\r\n      this.showRealNameModal = true;\r\n    },\r\n    closeRealNameModal() {\r\n      this.showRealNameModal = false;\r\n    },\r\n    submitRealNameVerification() {\r\n      if (this.canVerify) {\r\n        axios.post('/api/real-name-verification', {\r\n          name: this.authInfo.name,\r\n          idNumber: this.authInfo.idNumber\r\n        })\r\n        .then(response => {\r\n           this.realNameInfo = response.data; // 假设后端返回了实名信息\r\n           this.isRealNameVerified = true;\r\n           this.authInfo.name = '';\r\n           this.authInfo.idNumber = '';\r\n           this.closeRealNameModal();\r\n         })\r\n        .catch(error => {\r\n           console.error('Error during real-name verification:', error);\r\n          alert('实名认证失败，请重试。');\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 20px;\r\n}\r\n\r\n.title {\r\n  font-size: 24px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-box {\r\n  background-color: #f9f9f9;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  width: 95%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 18px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.account-info strong {\r\n  margin-left: 5px;\r\n}\r\n\r\nbutton {\r\n  margin-top: 10px;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  background-color: #007bff;\r\n  color: white;\r\n  cursor: pointer;\r\n  margin-right: 10px;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.family-member {\r\n  background-color: #f9f9f9;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  padding: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.modal {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fefefe;\r\n  margin: auto;\r\n  padding: 20px;\r\n  border: 1px solid #888;\r\n  width: 80%;\r\n  max-width: 300px;\r\n}\r\n\r\n.close {\r\n  color: #aaa;\r\n  float: right;\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n}\r\n\r\n.close:hover,\r\n.close:focus {\r\n  color: black;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin: 10px 0;\r\n  display: inline-block;\r\n  border: 1px solid #ccc;\r\n  box-sizing: border-box;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}