{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"nav-bar\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"messages-list\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"modal\"\n};\nconst _hoisted_5 = {\n  class: \"modal-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_message_card = _resolveComponent(\"message-card\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_cache[7] || (_cache[7] = _createElementVNode(\"h1\", {\n    class: \"nav-title\"\n  }, \"南京市浦口人民医院\", -1 /* HOISTED */)), _createCommentVNode(\" 导航链接，使用router-link \"), _createVNode(_component_router_link, {\n    to: \"/home\",\n    class: \"nav-item\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"主页\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/registration\",\n    class: \"nav-item\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"预约挂号\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/my-registrations\",\n    class: \"nav-item\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"我的挂号\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/my-bills\",\n    class: \"nav-item\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"我的账单\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/my-messages\",\n    class: \"nav-item\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"消息中心\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_router_link, {\n    to: \"/profile\",\n    class: \"nav-item\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"个人中心\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_2, [_cache[8] || (_cache[8] = _createElementVNode(\"h1\", {\n    class: \"title\"\n  }, \"消息中心\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, message => {\n    return _openBlock(), _createBlock(_component_message_card, {\n      key: message.id,\n      title: message.title,\n      content: message.content,\n      time: message.time,\n      \"is-read\": message.isRead,\n      onShowDetails: $options.displayMessageDetails\n    }, null, 8 /* PROPS */, [\"title\", \"content\", \"time\", \"is-read\", \"onShowDetails\"]);\n  }), 128 /* KEYED_FRAGMENT */))]), $data.showDetails ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h2\", null, _toDisplayString($data.details.title), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($data.details.content), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($data.details.time), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.closeDetails && $options.closeDetails(...args))\n  }, \"关闭\")])])) : _createCommentVNode(\"v-if\", true)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createCommentVNode","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_2","_hoisted_3","_renderList","$data","messages","message","_createBlock","_component_message_card","id","title","content","time","isRead","onShowDetails","$options","displayMessageDetails","showDetails","_hoisted_4","_hoisted_5","_toDisplayString","details","onClick","args","closeDetails"],"sources":["D:\\huawei\\qian\\src\\components\\MessagesComponent.vue"],"sourcesContent":["<!-- MessagesComponent.vue -->\r\n<template>\r\n  <div class=\"nav-bar\">\r\n    <h1 class=\"nav-title\">南京市浦口人民医院</h1>\r\n    <!-- 导航链接，使用router-link -->\r\n    <router-link to=\"/home\" class=\"nav-item\">主页</router-link>\r\n    <router-link to=\"/registration\" class=\"nav-item\">预约挂号</router-link>\r\n    <router-link to=\"/my-registrations\" class=\"nav-item\">我的挂号</router-link>\r\n    <router-link to=\"/my-bills\" class=\"nav-item\">我的账单</router-link>\r\n    <router-link to=\"/my-messages\" class=\"nav-item\">消息中心</router-link>\r\n    <router-link to=\"/profile\" class=\"nav-item\">个人中心</router-link>\r\n  </div>\r\n  <div class=\"container\">\r\n    <h1 class=\"title\">消息中心</h1>\r\n    <div class=\"messages-list\">\r\n      <message-card\r\n        v-for=\"message in messages\"\r\n        :key=\"message.id\"\r\n        :title=\"message.title\"\r\n        :content=\"message.content\"\r\n        :time=\"message.time\"\r\n        :is-read=\"message.isRead\"\r\n        @show-details=\"displayMessageDetails\"\r\n      ></message-card>\r\n    </div>\r\n    <div v-if=\"showDetails\" class=\"modal\">\r\n      <div class=\"modal-content\">\r\n        <h2>{{ details.title }}</h2>\r\n        <p>{{ details.content }}</p>\r\n        <p>{{ details.time }}</p>\r\n        <button @click=\"closeDetails\">关闭</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MessageCard from './MessageCard.vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'MessagesComponent',\r\n  components: {\r\n    MessageCard\r\n  },\r\n  data() {\r\n    return {\r\n      messages: [\r\n        { id: 1, title: '欢迎！', content: '欢迎使用医院预约挂号系统', time: '2024-07-20 08:00', isRead: false },\r\n        // 更多消息...\r\n      ],\r\n      showDetails: false,\r\n      details: {},\r\n      intervalId: null, // 用于存储定时器的 ID\r\n    };\r\n  },\r\n\r\n\r\n  created() {\r\n    this.startCheckingForMessages(); // 组件创建后开始检查新消息\r\n  },\r\n  beforeUnmount() {\r\n    if (this.intervalId) {\r\n      clearInterval(this.intervalId); // 组件销毁前清除定时器\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    displayMessageDetails(details) {\r\n      this.details = details;\r\n      this.showDetails = true;\r\n    },\r\n    closeDetails() {\r\n      this.showDetails = false;\r\n    },\r\n    startCheckingForMessages() {\r\n      this.intervalId = setInterval(() => {\r\n        this.fetchMessages();\r\n      }, 10000); // 每 10 秒检查一次新消息\r\n    },\r\n    fetchMessages() {\r\n      // 模拟从后端获取新消息的过程\r\n      axios.get('/messages')\r\n        .then(response => {\r\n          const newMessages = response.data;\r\n          this.messages = [...this.messages, ...newMessages];\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching messages:', error);\r\n        });\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  height: 100vh; /* 使容器占满整个视口高度 */\r\n  width: calc(100% - 200px); /* 宽度减去 nav-bar 的宽度 */\r\n  box-sizing: border-box; /* 确保 padding 不会影响宽度和高度 */\r\n  padding: 20px; /* 根据需要添加内边距 */\r\n  margin-left: 200px; /* 与 nav-bar 保持一定距离 */\r\n}\r\n\r\n.title {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.messages-list {\r\n  max-width: 95%;\r\n  margin: 0 200px;\r\n}\r\n\r\n.message-card {\r\n  margin-bottom: 20px;\r\n  cursor: pointer; /* 添加手型指针 */\r\n}\r\n\r\n.modal {\r\n  position: fixed; /* 固定定位，相对于浏览器窗口定位 */\r\n  top: 50%; /* 从顶部开始，位于视口高度的50% */\r\n  left: 50%; /* 从左侧开始，位于视口宽度的50% */\r\n  transform: translate(-50%, -50%); /* 向左和向上移动自身尺寸的50%，以确保完全居中 */\r\n  width: 50%; /* 宽度为视口宽度的50% */\r\n  height: 50%; /* 高度为视口高度的50% */\r\n  background-color: rgba(0, 0, 0, 0.5); /* 半透明背景 */\r\n  display: flex; /* 使用 Flexbox 布局 */\r\n  align-items: center; /* 垂直居中对齐子元素 */\r\n  justify-content: center; /* 水平居中对齐子元素 */\r\n  box-sizing: border-box; /* 边框和内边距包含在宽度和高度内 */\r\n  \r\n}\r\n\r\n.modal-content {\r\n  background-color: white;\r\n  text-align: center;\r\n  height: 100%;\r\n  width: 100%;\r\n  border: 2px solid black; /* 添加边框线 */\r\n  border-radius: 10px; /* 为边框添加圆角 */\r\n}\r\n\r\nbutton {\r\n  margin-top: 20px;\r\n}\r\n.nav-bar {\r\n  width: 200px;\r\n  height: 100%;\r\n  position: fixed;\r\n  background-color:#3131FF ;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.container {\r\n\r\n  margin-left:20px;\r\n /* 使容器占满整个视口高度 */\r\n  width: 100%; /* 沾满整个视口宽度 */\r\n/* 根据需要添加内边距 */\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}