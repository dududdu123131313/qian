"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[585],{4585:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var n=i(6768);const r={class:"my-registrations-container"},a={class:"registration-info-container"};function o(t,e,i,o,s,c){const l=(0,n.g2)("registration-info");return(0,n.uX)(),(0,n.CE)("div",r,[e[0]||(e[0]=(0,n.Lk)("h1",{class:"title"},"我的挂号",-1)),(0,n.Lk)("div",a,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.filteredRegistrationInfo,(t=>((0,n.uX)(),(0,n.Wv)(l,{key:t.medicalNumber,registration:t},null,8,["registration"])))),128))])])}i(8992),i(4520);var s=i(4232);function c(t,e,i,r,a,o){return(0,n.uX)(),(0,n.CE)("div",{class:(0,s.C4)(["registration-info",{"disabled-appointment":!o.canCancel}])},[(0,n.Lk)("p",null,"就诊科室: "+(0,s.v_)(i.registration.department),1),(0,n.Lk)("p",null,"门诊类型: "+(0,s.v_)(i.registration.outpatientType),1),(0,n.Lk)("p",null,"看诊医生: "+(0,s.v_)(i.registration.doctor_Name),1),(0,n.Lk)("p",null,"就诊时间: "+(0,s.v_)(o.formatTime(i.registration.visitTime)),1),(0,n.Lk)("p",null,"挂号时间: "+(0,s.v_)(o.formatTime(i.registration.registrationTime)),1),(0,n.Lk)("p",null,"就诊人: "+(0,s.v_)(i.registration.name),1),(0,n.Lk)("p",null,"就诊号: "+(0,s.v_)(i.registration.medicalNumber),1),(0,n.Lk)("p",null,"订单编号: "+(0,s.v_)(i.registration.id),1),(0,n.Lk)("button",{class:"cancel - button",onClick:e[0]||(e[0]=(...t)=>o.cancelAppointment&&o.cancelAppointment(...t))},"取消预约")],2)}var l=i(4373),u={props:{registration:{type:Object,required:!0}},computed:{canCancel(){const t=new Date,e=new Date(this.registration.visitTime),i=new Date(this.registration.registrationTime);return t.getTime()<e.getTime()&&t.getTime()<i.getTime()}},methods:{formatTime(t){return t?new Date(t).toLocaleString():""},cancelAppointment(){l.A.post(`/registrationLists/cancel/${this.registration.id}`).then((t=>{200===t.status?(alert("预约已取消"),this.$emit("delete-appointment",this.registration)):alert("预约取消失败: "+t.data.message)})).catch((t=>{console.error("取消预约出错:",t),alert("预约取消失败，请重试。")}))}}},g=i(1241);const m=(0,g.A)(u,[["render",c],["__scopeId","data-v-f86552de"]]);var f=m,d=i(782),p={components:{RegistrationInfo:f},data(){return{registrationInfo:[],filteredRegistrationInfo:[]}},computed:{...(0,d.aH)({accountName:t=>t.userInfo.accountName})},mounted(){this.fetchRegistrationInfoByAccountName()},methods:{async fetchRegistrationInfoByAccountName(){try{const t=await l.A.get(`/registrationLists/account/${this.accountName}`);this.registrationInfo=t.data,this.filterRegistrationInfo()}catch(t){console.error("Error fetching registration info by account name:",t)}},filterRegistrationInfo(){this.filteredRegistrationInfo=this.registrationInfo.filter((t=>t.accountName===this.accountName))}}};const h=(0,g.A)(p,[["render",o],["__scopeId","data-v-50edd86c"]]);var v=h}}]);
//# sourceMappingURL=585.c23a6f79.js.map