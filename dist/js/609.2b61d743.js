"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[609],{7609:function(e,a,l){l.r(a),l.d(a,{default:function(){return v}});var o=l(6768),n=l(4232),t=l(5130);const i={class:"profile-container"},s={class:"section-box account-info"},r={class:"section-box"},u={key:0},d={key:1},m=["disabled"],h={class:"section-box"},c={key:0,class:"modal"},b={class:"modal-content"},k={key:1,class:"modal"},f={class:"modal-content"};function p(e,a,l,p,M,L){return(0,o.uX)(),(0,o.CE)("div",i,[a[27]||(a[27]=(0,o.Lk)("h1",{class:"title"},"个人中心",-1)),(0,o.Lk)("div",s,[a[20]||(a[20]=(0,o.Lk)("h2",{class:"section-title"},"账号信息",-1)),(0,o.Lk)("p",null,[a[17]||(a[17]=(0,o.eW)("用户名: ")),(0,o.Lk)("strong",null,(0,n.v_)(L.userInfo.accountName),1)]),(0,o.Lk)("p",null,[a[18]||(a[18]=(0,o.eW)("姓名: ")),(0,o.Lk)("strong",null,(0,n.v_)(L.userInfo.name),1)]),(0,o.Lk)("p",null,[a[19]||(a[19]=(0,o.eW)("手机号: ")),(0,o.Lk)("strong",null,(0,n.v_)(L.userInfo.phonenumber),1)]),(0,o.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>L.changePassword&&L.changePassword(...e))},"修改密码"),(0,o.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>L.bindPhone&&L.bindPhone(...e))},"绑定手机号"),(0,o.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>L.logout&&L.logout(...e))},"退出登录")]),(0,o.Lk)("div",r,[a[21]||(a[21]=(0,o.Lk)("h2",{class:"section-title"},"实名认证信息",-1)),M.isRealNameVerified?((0,o.uX)(),(0,o.CE)("p",u,"姓名: "+(0,n.v_)(M.realNameInfo.name),1)):(0,o.Q3)("",!0),M.isRealNameVerified?((0,o.uX)(),(0,o.CE)("p",d,"身份证号: "+(0,n.v_)(M.realNameInfo.id),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{disabled:M.isRealNameVerified,onClick:a[3]||(a[3]=(...e)=>L.showingRealNameModal&&L.showingRealNameModal(...e))},"实名认证",8,m)]),(0,o.Lk)("div",h,[a[22]||(a[22]=(0,o.Lk)("h2",{class:"section-title"},"家庭成员信息",-1)),(0,o.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>L.showAddFamilyMemberModal&&L.showAddFamilyMemberModal(...e))},"添加家庭成员"),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(M.familyMembers,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"family-member"},[(0,o.Lk)("p",null,"姓名: "+(0,n.v_)(e.name),1),(0,o.Lk)("p",null,"年龄: "+(0,n.v_)(e.age),1),(0,o.Lk)("p",null,"性别: "+(0,n.v_)(e.sex),1),(0,o.Lk)("p",null,"身份证号: "+(0,n.v_)(e.id),1)])))),128))]),M.showModal?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",b,[(0,o.Lk)("span",{class:"close",onClick:a[5]||(a[5]=(...e)=>L.closeModal&&L.closeModal(...e))},"×"),a[24]||(a[24]=(0,o.Lk)("h2",null,"添加家庭成员",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>M.newMember.name=e),placeholder:"姓名",required:""},null,512),[[t.Jo,M.newMember.name]]),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>M.newMember.id=e),placeholder:"身份证号",required:""},null,512),[[t.Jo,M.newMember.id]]),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=e=>M.newMember.age=e),placeholder:"年龄",required:""},null,512),[[t.Jo,M.newMember.age]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>M.newMember.sex=e),placeholder:"性别",required:""},a[23]||(a[23]=[(0,o.Lk)("option",{value:"男"},"男",-1),(0,o.Lk)("option",{value:"女"},"女",-1)]),512),[[t.u1,M.newMember.sex]]),(0,o.Lk)("button",{onClick:a[10]||(a[10]=(...e)=>L.submitFamilyMember&&L.submitFamilyMember(...e))},"添加")])])):(0,o.Q3)("",!0),M.showRealNameModal?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",f,[(0,o.Lk)("span",{class:"close",onClick:a[11]||(a[11]=(...e)=>L.closeRealNameModal&&L.closeRealNameModal(...e))},"×"),a[26]||(a[26]=(0,o.Lk)("h2",null,"实名认证",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":a[12]||(a[12]=e=>M.authInfo.name=e),placeholder:"姓名",required:""},null,512),[[t.Jo,M.authInfo.name]]),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":a[13]||(a[13]=e=>M.authInfo.id=e),placeholder:"身份证号",required:""},null,512),[[t.Jo,M.authInfo.id]]),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":a[14]||(a[14]=e=>M.authInfo.age=e),placeholder:"年龄",required:""},null,512),[[t.Jo,M.authInfo.age]]),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[15]||(a[15]=e=>M.authInfo.sex=e),placeholder:"性别",required:""},a[25]||(a[25]=[(0,o.Lk)("option",{value:"男"},"男",-1),(0,o.Lk)("option",{value:"女"},"女",-1)]),512),[[t.u1,M.authInfo.sex]]),(0,o.Lk)("button",{onClick:a[16]||(a[16]=(...e)=>L.submitRealNameVerification&&L.submitRealNameVerification(...e))},"认证")])])):(0,o.Q3)("",!0)])}l(4114);var M=l(4373),L={name:"ProfileComponent",data(){return{username:"user123",name:"张三",phone:"13800138000",familyMembers:[],showModal:!1,newMember:{name:"",id:"",age:null,sex:""},isRealNameVerified:!1,realNameInfo:null,showRealNameModal:!1,authInfo:{name:"",id:"",age:null,sex:""}}},computed:{canVerify(){return!this.isRealNameVerified},userInfo(){return this.$store.state.userInfo}},methods:{changePassword(){alert("修改密码功能尚未实现")},bindPhone(){alert("绑定手机号功能尚未实现")},logout(){alert("退出登录功能尚未实现")},showAddFamilyMemberModal(){this.showModal=!0},closeModal(){this.showModal=!1},submitFamilyMember(){this.newMember.name&&this.newMember.id&&null!==this.newMember.age&&this.newMember.sex?M.A.post("/family-members",{name:this.newMember.name,id:this.newMember.id,age:this.newMember.age,sex:this.newMember.sex}).then((e=>{this.familyMembers.push(e.data),this.newMember.name="",this.newMember.id="",this.newMember.age=null,this.newMember.sex="",this.closeModal()})).catch((e=>{console.error("Error adding family member:",e),alert("添加家庭成员失败，请重试。")})):alert("请填写完整的家庭成员信息")},showingRealNameModal(){this.showRealNameModal=!0},closeRealNameModal(){this.showRealNameModal=!1},submitRealNameVerification(){if(this.canVerify){const e={name:this.authInfo.name,id:this.authInfo.id,sex:this.authInfo.sex,age:this.authInfo.age};if(null===e.age||isNaN(e.age)||e.age<0||e.age>150)return void alert("年龄需在0到150岁之间且为有效数字，请重新输入。");if(!e.name||!e.id||!e.sex)return void alert("请填写完整的实名认证信息");M.A.post("/identifications",e).then((e=>{this.realNameInfo=e.data,e.data&&e.data.success?(this.isRealNameVerified=!0,this.authInfo.name="",this.authInfo.id="",this.authInfo.age=null,this.authInfo.sex="",this.closeRealNameModal()):(console.error("实名认证成功，但返回数据格式不符合预期:",e.data),alert("实名认证成功。"))})).catch((e=>{console.error("Error during real-name verification:",e),alert("实名认证失败，请重试。")}))}}}},w=l(1241);const g=(0,w.A)(L,[["render",p],["__scopeId","data-v-421c1618"]]);var v=g}}]);
//# sourceMappingURL=609.2b61d743.js.map