{"version":3,"file":"js/585.c23a6f79.js","mappings":"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","sources":["webpack://login-vue/./src/components/MyRegistrationsComponent.vue","webpack://login-vue/./src/components/RegistrationInfo.vue","webpack://login-vue/./src/components/RegistrationInfo.vue?d6c7","webpack://login-vue/./src/components/MyRegistrationsComponent.vue?7d41"],"sourcesContent":["<template>\r\n  <div class=\"my-registrations-container\">\r\n    <h1 class=\"title\">我的挂号</h1>\r\n    <div class=\"registration-info-container\">\r\n      <registration-info\r\n                    v-for=\"reg in filteredRegistrationInfo\"\r\n                    :key=\"reg.medicalNumber\"\r\n                    :registration=\"reg\"\r\n      ></registration-info>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RegistrationInfo from './RegistrationInfo.vue';\r\nimport axios from 'axios';\r\nimport { mapState } from 'vuex'; // 引入mapState辅助函数用于获取Vuex中的state数据\r\n\r\nexport default {\r\n  components: {\r\n    RegistrationInfo\r\n  },\r\n  data() {\r\n    return {\r\n      registrationInfo: [],\r\n      filteredRegistrationInfo: []\r\n    };\r\n  },\r\n  computed: {\r\n   ...mapState({\r\n      accountName: state => state.userInfo.accountName // 从Vuex的state中获取accountName\r\n    })\r\n  },\r\n  mounted() {\r\n    // 在组件挂载时（页面加载时）就发起查询请求，使用从Vuex获取的accountName作为参数\r\n    this.fetchRegistrationInfoByAccountName();\r\n  },\r\n  methods: {\r\n    async fetchRegistrationInfoByAccountName() {\r\n      try {\r\n        const response = await axios.get(`/registrationLists/account/${this.accountName}`);\r\n        this.registrationInfo = response.data;\r\n        this.filterRegistrationInfo();\r\n      } catch (error) {\r\n        console.error('Error fetching registration info by account name:', error);\r\n      }\r\n    },\r\n    filterRegistrationInfo() {\r\n      this.filteredRegistrationInfo = this.registrationInfo.filter(item => item.accountName === this.accountName);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.my-registrations-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  height: 100%; /* 使容器占满整个视口高度 */\r\n  width: 100%; /* 沾满整个视口宽度 */\r\n  box-sizing: border-box; /* 确保 padding 不会影响宽度和高度 */\r\n  padding: 20px; /* 根据需要添加内边距 */\r\n  margin-left: 20px; /* 侧边栏宽度 */\r\n}\r\n\r\n.title {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.registration-info-container {\r\n  width: 80%;\r\n  max-width: 1200px;\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  border: 1px solid #ddd;\r\n  padding: 20px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n}\r\n\r\n.nav-bar {\r\n  width: 200px;\r\n  height: 100%;\r\n  position: fixed;\r\n  background-color: #3131FF;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>","<!-- RegistrationInfo.vue -->\r\n<template>\r\n  <div class=\"registration-info\" :class=\"{ 'disabled-appointment':!canCancel }\">\r\n    <p>就诊科室: {{ registration.department }}</p>\r\n    <p>门诊类型: {{ registration.outpatientType }}</p>\r\n    <p>看诊医生: {{ registration.doctor_Name }}</p>\r\n    <p>就诊时间: {{ formatTime(registration.visitTime) }}</p>\r\n    <p>挂号时间: {{ formatTime(registration.registrationTime) }}</p>\r\n    <p>就诊人: {{ registration.name }}</p>\r\n    <p>就诊号: {{ registration.medicalNumber }}</p>\r\n    <p>订单编号: {{ registration.id }}</p>\r\n    <button class=\"cancel - button\" @click=\"cancelAppointment\">取消预约</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  props: {\r\n    registration: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {\r\n    canCancel() {\r\n      const now = new Date();\r\n      const visitTime = new Date(this.registration.visitTime);\r\n      const registrationTime = new Date(this.registration.registrationTime);\r\n      return now.getTime() < visitTime.getTime() && now.getTime() < registrationTime.getTime();\r\n    }\r\n  },\r\n  methods: {\r\n    formatTime(time) {\r\n      if (time) {\r\n        return new Date(time).toLocaleString();\r\n      }\r\n      return '';\r\n    },\r\n    cancelAppointment() {\r\n      // 发送请求到后端API来取消预约\r\n      axios.post(`/registrationLists/cancel/${this.registration.id}`)\r\n        .then(response => {\r\n          if (response.status === 200) {\r\n            alert('预约已取消');\r\n            // 从列表中删除这条记录\r\n            this.$emit('delete-appointment', this.registration);\r\n          } else {\r\n            alert('预约取消失败: ' + response.data.message);\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('取消预约出错:', error);\r\n          alert('预约取消失败，请重试。');\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.registration-info {\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.cancel-button {\r\n  padding: 10px 20px;\r\n  background-color: #f44336;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n \r\n}\r\n.registration-info {\r\n                  padding: 20px;\r\n                  margin-bottom: 20px;\r\n                  border-bottom: 1px solid #ddd;\r\n                  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n                  background-color: #fff;\r\n                  border-radius: 8px;\r\n                }\r\n.disabled-appointment {\r\n              opacity: 0.5;\r\n            }\r\n.cancel-button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n</style>","import { render } from \"./RegistrationInfo.vue?vue&type=template&id=f86552de&scoped=true\"\nimport script from \"./RegistrationInfo.vue?vue&type=script&lang=js\"\nexport * from \"./RegistrationInfo.vue?vue&type=script&lang=js\"\n\nimport \"./RegistrationInfo.vue?vue&type=style&index=0&id=f86552de&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f86552de\"]])\n\nexport default __exports__","import { render } from \"./MyRegistrationsComponent.vue?vue&type=template&id=50edd86c&scoped=true\"\nimport script from \"./MyRegistrationsComponent.vue?vue&type=script&lang=js\"\nexport * from \"./MyRegistrationsComponent.vue?vue&type=script&lang=js\"\n\nimport \"./MyRegistrationsComponent.vue?vue&type=style&index=0&id=50edd86c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50edd86c\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","$data","filteredRegistrationInfo","reg","_createBlock","_component_registration_info","key","medicalNumber","registration","_normalizeClass","$options","canCancel","_toDisplayString","$props","department","outpatientType","doctor_Name","formatTime","visitTime","registrationTime","name","id","onClick","_cache","args","cancelAppointment","props","type","Object","required","computed","now","Date","this","getTime","methods","time","toLocaleString","axios","post","then","response","status","alert","$emit","data","message","catch","error","console","__exports__","components","RegistrationInfo","registrationInfo","mapState","accountName","state","userInfo","mounted","fetchRegistrationInfoByAccountName","get","filterRegistrationInfo","filter","item","render"],"sourceRoot":""}