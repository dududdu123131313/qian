"use strict";(self["webpackChunklogin_vue"]=self["webpackChunklogin_vue"]||[]).push([[654],{8654:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var i=t(6768),a=t(4232);const n={class:"container"},l={class:"messages-list"},o={key:0,class:"modal"},c={class:"modal-content"};function d(e,s,t,d,r,h){const m=(0,i.g2)("message-card");return(0,i.uX)(),(0,i.CE)("div",n,[s[1]||(s[1]=(0,i.Lk)("h1",{class:"title"},"消息中心",-1)),(0,i.Lk)("div",l,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.messages,(e=>((0,i.uX)(),(0,i.Wv)(m,{key:e.id,title:e.title,content:e.content,time:e.time,"is-read":e.isRead,onShowDetails:h.displayMessageDetails},null,8,["title","content","time","is-read","onShowDetails"])))),128))]),r.showDetails?((0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",c,[(0,i.Lk)("h2",null,(0,a.v_)(r.details.title),1),(0,i.Lk)("p",null,(0,a.v_)(r.details.content),1),(0,i.Lk)("p",null,(0,a.v_)(r.details.time),1),(0,i.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>h.closeDetails&&h.closeDetails(...e))},"关闭")])])):(0,i.Q3)("",!0)])}const r={class:"message-title"},h={class:"message-content"},m={class:"message-time"},g={key:0,class:"unread-dot"};function u(e,s,t,n,l,o){return(0,i.uX)(),(0,i.CE)("div",{class:"message-card",onClick:s[0]||(s[0]=(...e)=>o.showDetails&&o.showDetails(...e))},[(0,i.Lk)("div",r,(0,a.v_)(t.title),1),(0,i.Lk)("div",h,(0,a.v_)(t.content),1),(0,i.Lk)("div",m,(0,a.v_)(t.time),1),t.isRead?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",g))])}var v={props:{title:String,content:String,time:String,isRead:Boolean},methods:{showDetails(){this.$emit("show-details",{title:this.title,content:this.content,time:this.time})}}},k=t(1241);const f=(0,k.A)(v,[["render",u],["__scopeId","data-v-151a387a"]]);var p=f,D=t(4373),C={name:"MessagesComponent",components:{MessageCard:p},data(){return{messages:[{id:1,title:"欢迎！",content:"欢迎使用医院预约挂号系统",time:"2024-07-20 08:00",isRead:!1}],showDetails:!1,details:{},intervalId:null}},created(){this.startCheckingForMessages()},beforeUnmount(){this.intervalId&&clearInterval(this.intervalId)},methods:{displayMessageDetails(e){this.details=e,this.showDetails=!0},closeDetails(){this.showDetails=!1},startCheckingForMessages(){this.intervalId=setInterval((()=>{this.fetchMessages()}),1e4)},fetchMessages(){D.A.get("/messages").then((e=>{const s=e.data;this.messages=[...this.messages,...s]})).catch((e=>{console.error("Error fetching messages:",e)}))}}};const w=(0,k.A)(C,[["render",d],["__scopeId","data-v-3bffed8f"]]);var _=w}}]);
//# sourceMappingURL=654.0f5d3564.js.map